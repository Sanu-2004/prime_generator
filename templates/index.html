{% extends "base.html" %}

{% block title %}Prime-Checker{% endblock title %}

{% block content %}
    <h1>Welcome to Prime Checker!</h1>
    <form id="compute-form" class="from col-md-6 d-flex flex-column justify-content-center">
        <input type="text" class="form-control my-2" id="num" placeholder="Enter Number" /> 
        <button type="submit" class="btn btn-primary mx-auto my-4" id="compute">Check</button>
    </form>
    <br />
    <div id="result" class="col-md-6 text-wrap"></div>

    <script>
        const button = document.getElementById('compute');
        async function compute(event) {
            event.preventDefault();
            const num = document.getElementById('num').value;
            button.disabled = true;
            button.innerText = "Checking...";
            const response = await fetch('/api/checker', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ num}),
            });

            const data = await response.json();
            document.getElementById('result').innerText = data.result;
            button.disabled = false;
            button.innerText = "Check";
        }

         window.addEventListener("DOMContentLoaded", () => {
            document.getElementById("compute-form").addEventListener("submit", compute);
        });
    </script>
{% endblock content %}
